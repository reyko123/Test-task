сделать норм MVC
сунуть все это в тестовый фрейм ворк
сделать норм базовые классы
разделить индекс и справочник друг от друга
нормально оформить код согласно PSR'ам
сделать норм приватность в классах
переиминовать норм функции
вместо инклюдов использовать нэймспейсы и  автолоад
доделать запрос на выборку предыдущих  значений справочника
